<!-- header.component.html -->
<header class="navbar">
  <div class="logo">
    <a routerLink="/">
      JO<span>2025</span>
    </a>
  </div>

  <button class="mobile-menu-toggle" (click)="toggleMenu()" aria-label="Menu">
    <span class="material-icons">{{ isMenuOpen ? 'close' : 'menu' }}</span>
  </button>

  <nav class="nav-links" [class.open]="isMenuOpen">
    <a routerLink="/home" routerLinkActive="active">ACCUEIL</a>
    <a routerLink="/events" routerLinkActive="active">ÉPREUVES</a>
    <a routerLink="/offres" routerLinkActive="active">BILLETTERIE</a>

    <ng-container *ngIf="isAdmin">
      <div class="dropdown" [class.open]="adminMenuOpen"
           (mouseenter)="openAdminMenu()"
           (mouseleave)="closeAdminMenu()">
        <a class="dropdown-toggle" routerLinkActive="active">
          ADMIN <span class="arrow">▼</span>
        </a>
        <div class="dropdown-content"
             (mouseenter)="onAdminDropdownEnter()"
             (mouseleave)="onAdminDropdownLeave()">
          <a routerLink="/admin" routerLinkActive="active">Tableau de bord</a>
          <a routerLink="/admin/offers" routerLinkActive="active">Gestion des offres</a>
          <a routerLink="/admin/offers/create" routerLinkActive="active">Créer une offre</a>
          <a routerLink="/admin/create-event" routerLinkActive="active">Créer un événement</a>
        </div>
      </div>
    </ng-container>

  </nav>

  <div class="nav-icons">
    <ng-container *ngIf="!isLoggedIn">
      <button class="icon-button" routerLink="/auth/login">
        <img src="https://img.icons8.com/ios-filled/20/ffffff/login-rounded.png" alt="Connexion" />
      </button>
      <div class="divider"></div>
      <button class="icon-button" routerLink="/auth/register">
        <img src="https://img.icons8.com/ios-filled/20/ffffff/add-user-male.png" alt="Inscription" />
      </button>
    </ng-container>

    <ng-container *ngIf="isLoggedIn">
      <button class="icon-button" routerLink="/panier">
        <img src="https://img.icons8.com/ios-filled/20/ffffff/shopping-bag.png" alt="Panier" />
        <span class="cart-count" *ngIf="cartItemsCount > 0">{{ cartItemsCount }}</span>
      </button>

      <div class="divider"></div>

      <div class="dropdown user-dropdown" [class.open]="userMenuOpen"
           (mouseenter)="openUserMenu()"
           (mouseleave)="closeUserMenu()">
        <button class="icon-button dropdown-toggle">
          <img src="https://img.icons8.com/ios-filled/20/ffffff/user.png" alt="User" />
        </button>
        <div class="dropdown-content user-menu"
             (mouseenter)="onUserDropdownEnter()"
             (mouseleave)="onUserDropdownLeave()">
          <a routerLink="/profile">Mon Profil</a>
          <a (click)="logout()">Déconnexion</a>
        </div>
      </div>
    </ng-container>
  </div>
</header>
